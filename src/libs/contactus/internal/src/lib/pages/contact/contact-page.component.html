<ion-header>
	<ion-toolbar color="light">
		<ion-buttons slot="start">
			<ion-back-button [defaultHref]="defaultBackUrl"></ion-back-button>
		</ion-buttons>
		<ion-title *ngIf="contact else titleNoContact">{{contact|personTitle}}</ion-title>
		<ng-template #titleNoContact>
			<ion-title>Contact</ion-title>
		</ng-template>
		<ion-buttons slot="end">
			<ion-menu-button menu="mainMenu"></ion-menu-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content>

	<ion-card>
		<ion-item-divider color="light">
			<ion-label>Contacts</ion-label>
		</ion-item-divider>
		<ion-item *ngIf="contact?.dto?.relatedContacts">
			<ion-badge *ngFor="let m of relatedContacts"
								 color="light" style="cursor: pointer"
								 (click)="goMember(m.id)"
			>
				{{m.brief.relatedAs}} of {{m.brief.title}}
			</ion-badge>
			<ion-buttons slot="end">
				<ion-button (click)="addRelatedContact($event)">Add</ion-button>
			</ion-buttons>
		</ion-item>
		<ion-item>
			<ion-input label="Email" readonly type="email" placeholder="no email" [value]="contact?.dto?.email"></ion-input>
			<ion-button fill="clear">
				<ion-icon [name]="contact?.dto?.email ? 'create' : 'add'"></ion-icon>
			</ion-button>
		</ion-item>
		<ion-item>
			<ion-input label="Phone" readonly type="phone" placeholder="no phone" [value]="contact?.dto?.phone"></ion-input>
			<ion-button fill="clear">
				<ion-icon [name]="contact?.dto?.phone ? 'create' : 'add'"></ion-icon>
			</ion-button>
		</ion-item>
		<ion-item>
			<ion-input label="Website" readonly type="url" placeholder="no website" [value]="contact?.dto?.website"></ion-input>
			<ion-button fill="clear">
				<ion-icon [name]="contact?.dto?.website ? 'create' : 'add'"></ion-icon>
			</ion-button>
		</ion-item>
	</ion-card>

	<sneat-address-form
		[address]="contact?.dto?.address"
		(save)="saveAddress($event)"
	></sneat-address-form>

	<ion-card *ngIf="team?.type === 'family'">
		<ion-item color="light">
			<ion-label>Related members</ion-label>
		</ion-item>
		<ion-item>
			<ion-label color="medium" style="font-style: italic">No specific member has been associated with this contact
			</ion-label>
		</ion-item>
	</ion-card>

	<ion-card>
		<ion-item-divider color="light">
			<ion-label>Locations</ion-label>
			<ion-buttons slot="end">
				<ion-button color="medium" routerLink="new-location">
					<ion-icon name="add-outline" slot="start"></ion-icon>
					<ion-label>New</ion-label>
				</ion-button>
			</ion-buttons>
		</ion-item-divider>
		<ion-item-divider *ngIf="contactLocations && !contactLocations.length">
			<ion-label>No locations have been added yet.</ion-label>
		</ion-item-divider>
		<sneat-contacts-list [contacts]="contactLocations"></sneat-contacts-list>
	</ion-card>

	<sneat-contact-roles-input [team]="team" [contact]="contact"></sneat-contact-roles-input>
</ion-content>
