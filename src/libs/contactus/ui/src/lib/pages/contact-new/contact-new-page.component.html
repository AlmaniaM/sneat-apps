<ion-nav></ion-nav>

<ion-header>
    <ion-toolbar color="primary" class="with-back-button">
        <ion-buttons slot="start">
            <ion-back-button [defaultHref]="defaultBackUrl"></ion-back-button>
        </ion-buttons>
        <ion-title>{{title}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>

    <ion-item-divider color="light" *ngIf="assetId">
        <ion-label *ngIf="assetDto" color="medium">{{assetDto.title}}</ion-label>
    </ion-item-divider>

    <ion-item-divider color="light" *ngIf="memberId">
        <ion-label *ngIf="memberDto" color="medium">{{memberDto.title}}</ion-label>
    </ion-item-divider>

    <ion-item>
        <ion-input autofocus="true" placeholder="Full name" #nameInput [(ngModel)]="name"
                   [disabled]="creating"></ion-input>
    </ion-item>

    <ion-item>
        <ion-label color="medium">
            <ion-icon name="call"></ion-icon>
        </ion-label>
        <ion-input type="tel" placeholder="phone" [(ngModel)]="phone" [disabled]="creating"></ion-input>
    </ion-item>

    <ion-item>
        <ion-label color="medium">
            <ion-icon name="at"></ion-icon>
        </ion-label>
        <ion-input type="email" placeholder="email" [(ngModel)]="email" [disabled]="creating"></ion-input>
    </ion-item>

    <ion-radio-group [(ngModel)]="gender">
        <ion-item>
            <ion-radio slot="start" value="male"></ion-radio>
            <ion-label>Male</ion-label>
        </ion-item>
        <ion-item>
            <ion-radio slot="start" value="female"></ion-radio>
            <ion-label>Female</ion-label>
        </ion-item>
    </ion-radio-group>

    <ng-container *ngIf="memberId && !relation">
        <p *ngIf="!memberDto">Please select relation to member</p>
        <p *ngIf="memberDto">Please select relation to <b>{{memberDto.title}}</b></p>
        <ion-list mode="ios">
            <ion-item mode="ios" button *ngFor="let rel of relations; trackBy: trackById"
                      (click)="selectRel(rel)">{{rel.title}}</ion-item>
        </ion-list>
    </ng-container>

    <ion-list *ngIf="relation">
        <ion-item>
            <ion-label>Relation</ion-label>
            <ion-select [(ngModel)]="relation" [disabled]="creating" interface="action-sheet">
                <ion-select-option *ngFor="let rel of relations; trackBy: trackById"
                                   [value]="rel.id">{{rel.title}}</ion-select-option>
            </ion-select>
        </ion-item>
    </ion-list>

    <div class="ion-padding">
        <ion-button expand="full" [disabled]="!name || creating" (click)="submit()">
            Create
        </ion-button>
    </div>
</ion-content>
