<ion-card>
	<ion-item>
		<ion-label>
			<h2>{{title || '@title is NOT defined '}}</h2>
		</ion-label>
		<ion-buttons slot="end">
			<ion-button *ngIf="authState.status === 'notAuthenticated'"
						routerLink="/login"
						color="primary" routerDirection="forward"
						style="text-transform: none"
			>
				Sign in
			</ion-button>
			<ion-button *ngIf="authState.status === 'authenticated'">
				<ion-icon name="add" slot="start"></ion-icon>
				<ion-label>Add</ion-label>
			</ion-button>
		</ion-buttons>
	</ion-item>

	<ion-item *ngIf="authState.status === 'notAuthenticated'">
		<ion-label color="medium">Please sign in to access your projects</ion-label>
	</ion-item>
	<ng-container *ngIf="userRecordLoaded; else loading">
		<ion-item *ngIf="!authState?.user?.isAnonymous">
			<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>
			<ion-label color="medium">No personal or favorite projects yet</ion-label>
		</ion-item>
		<ion-item *ngFor="let item of projects" tappable (click)="goProject(item)" detail>
			<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>
			{{item.project.title}}
		</ion-item>
	</ng-container>
	<ng-template #loading>
		<datatug-loading-items [authStatus]="authState.status"
							   title="Loading user projects..."></datatug-loading-items>
	</ng-template>
	<ion-item-divider *ngIf="showDemoProjects">
		<ion-label><h3 style="font-weight: bold">Demo projects</h3></ion-label>
	</ion-item-divider>
	<ion-item *ngFor="let project of demoProjects" tappable (click)="goProject({store: undefined, project: project})"
			  detail>
		<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>
		{{project.title}}
	</ion-item>
</ion-card>
