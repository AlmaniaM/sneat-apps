<ion-card>
	<ion-item tappable routerLink="/my" routerDirection="root">
		<!--    <ion-buttons slot="start" class="ion-no-margin">-->
		<!--      <ion-button disabled color="medium" >-->
		<!--        <ion-icon  slot="start" name="person-circle-outline"></ion-icon>-->
		<!--      </ion-button>-->
		<!--    </ion-buttons>-->
		<ion-icon slot="start" name="person-circle-outline"></ion-icon>

		<ion-label *ngIf="authState.user; else notAuthenticated" color="medium">
			{{authState.user.displayName}}
		</ion-label>
		<ng-template #notAuthenticated>
			<ion-label color="medium">
				<ng-container *ngIf="!authStatus">Loading...</ng-container>
				<ng-container *ngIf="authStatus === 'authenticating'">Authenticating...</ng-container>
				<ng-container *ngIf="authStatus === 'notAuthenticated'">
					Please <a [routerLink]="'/login'">sign in</a>
				</ng-container>
			</ion-label>
		</ng-template>

		<ion-buttons slot="end" *ngIf="authStatus === 'authenticated'">
			<ion-button color="medium" title="Settings">
				<ion-icon name="settings-outline"></ion-icon>
			</ion-button>
			<ion-button color="medium" title="Sign-out" (click)="logout()">
				<ion-icon name="log-out-outline"></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-item>
</ion-card>

<ion-card>
	<datatug-menu-store-selector
			[datatugUser]="datatugUserState?.record"
			[currentStoreId]="currentStoreId"
	></datatug-menu-store-selector>
	<datatug-menu-project-selector *ngIf="currentStoreId"
								   [datatugUser]="datatugUserState?.record"
								   [currentStoreId]="currentStoreId"
								   [currentProjectId]="currentProject?.ref.projectId"
								   (projectChanged)="onProjectRefChanged($event)"
	></datatug-menu-project-selector>
	<datatug-menu-env-selector
			*ngIf="currentProject"
			[projectSummary]="currentProject"
	></datatug-menu-env-selector>
</ion-card>

<!--<datatug-context-card *ngIf="currentProjectId" [projectId]="currentProjectId"></datatug-context-card>-->

<!--<datatug-table-meta-card *ngIf="table" [meta]="table?.meta"></datatug-table-meta-card>-->
<wormhole-exit tunnel="context-menu"></wormhole-exit>
<datatug-project-menu *ngIf="currentProject"></datatug-project-menu>

<ion-card>
	<ion-card-content>
		2020 - 2021 &copy; DataTug.app
	</ion-card-content>
</ion-card>
