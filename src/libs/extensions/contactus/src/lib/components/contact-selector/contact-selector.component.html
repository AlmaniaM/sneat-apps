<ion-content>

	<ion-item color="primary" class="sneat-tiny-end-padding">
		<ion-label *ngIf="!role">Select contact</ion-label>
		<ion-label *ngIf="role">Select {{role}}</ion-label>
		<ion-buttons slot="end">
			<ion-button (click)="close($event)">
				<ion-icon name="close-outline"></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-item>
	<sneat-select-from-list
		[label]="''"
		[items]="displayItems"
		[(ngModel)]="selectedContactID"
		(ngModelChange)="onContactSelected($event)"
		[isFilterable]="true"
		radioSlot="end"
	></sneat-select-from-list>

	<ng-container *ngIf="selectedContact && subType">
<!--		<ion-item>-->
<!--			<ion-label>Select dispatch location</ion-label>-->
<!--			<ion-buttons slot="end">-->
<!--				<ion-button>-->
<!--					<ion-icon name="add-outline" slot="start"></ion-icon>-->
<!--					<ion-label>Add</ion-label>-->
<!--				</ion-button>-->
<!--			</ion-buttons>-->
<!--		</ion-item>-->
		<ion-segment *ngIf="locationTab" [(ngModel)]="locationTab">
			<ion-segment-button value="locations">Known locations</ion-segment-button>
			<ion-segment-button value="new-location">New location</ion-segment-button>
		</ion-segment>
		<p class="ion-padding" *ngIf="locationTab === 'locations' && selectedContact && !selectedContact.dto?.relatedContacts?.length">
			<ion-text color="medium">No locations for selected contact</ion-text>
		</p>
<!--		<h2 class="ion-margin-horizontal"></h2>-->
		<sneat-select-from-list *ngIf="locationTab === 'locations' && selectedContact?.dto?.relatedContacts?.length"
			[label]="''"
			[items]="subItems"
			[(ngModel)]="selectedSubContactID"
			(ngModelChange)="onDispatchLocationSelected($event)"
			[isFilterable]="true"
			radioSlot="end"
		></sneat-select-from-list>

		<sneat-location-form *ngIf="locationTab === 'new-location'"
												 contactType="location"
												 [contact]="newLocationContact"
												 [team]="team"
												 [parentContact]="selectedContact"
												 (contactCreated)="onLocationCreated($event)"
		></sneat-location-form>
	</ng-container>
</ion-content>
