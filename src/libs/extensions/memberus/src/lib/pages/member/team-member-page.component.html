<ion-header>
	<ion-toolbar color="light">
		<ion-buttons slot="start">
			<ion-back-button [defaultHref]="'space/' + team?.type + '/' + team?.id"></ion-back-button>
		</ion-buttons>
		<ng-container [ngSwitch]="team?.type">
			<ion-title *ngSwitchCase="'family'">Family member</ion-title>
			<ion-title *ngSwitchCase="'cohabit'">Housemate</ion-title>
			<ion-title *ngSwitchCase="'work'">Worker</ion-title>
			<ion-title *ngSwitchDefault>Member : {{defaultBackUrl}}</ion-title>
		</ng-container>
		<!--<ion-title *ngIf="member else titleNoMember">{{member.title}}</ion-title>-->
		<!--<ng-template #titleNoMember>-->
		<!--<ion-title>Member</ion-title>-->
		<!--</ng-template>-->
		<ion-buttons slot="end">
			<ion-button
				*ngIf="member"
				[title]="member?.brief?.userID === teamParams.userService.currentUserId ? 'Leave team' : 'Remove team member'"
				(click)="removeMember()"
			>
				<ion-icon name="trash"></ion-icon>
			</ion-button>
			<ion-menu-button menu="mainMenu"></ion-menu-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content class="cardy">
	<!--			<ion-item-group>-->
	<!--				<ion-item-divider>Missing data</ion-item-divider>-->
	<!--				<ion-item>-->
	<!--					<ion-label>Date of birth</ion-label>-->
	<!--					<ion-input-->
	<!--						value="{{ dob | date: 'dd.MM.yyyy' }}"-->
	<!--						id="date"-->
	<!--						class="ion-text-end"-->
	<!--					></ion-input>-->
	<!--					<ion-popover trigger="date" size="cover">-->
	<!--						<ng-template>-->
	<!--							<ion-datetime-->
	<!--								presentation="date"-->
	<!--								[(ngModel)]="dob"-->
	<!--								locale="sl-SI"-->
	<!--							></ion-datetime>-->
	<!--						</ng-template>-->
	<!--					</ion-popover>-->
	<!--				</ion-item>-->
	<!--			</ion-item-group>-->
	<ion-grid>
		<ion-row>
			<ion-col>
				<ion-card>
					<ion-list>
						<ion-item class="with-buttons">
							<ion-label style="font-weight: bold">
								<ng-container *ngIf="member?.brief?.gender">
									<ng-container [ngSwitch]="member?.brief?.gender">
										<span *ngSwitchCase="'male'" class="ion-margin-end">ðŸ§‘</span>
										<span *ngSwitchCase="'female'" class="ion-margin-end">ðŸ‘©</span>
										<ion-icon name="person" *ngSwitchDefault></ion-icon>
									</ng-container>

									{{member?.brief?.title || member?.brief?.shortTitle || (member?.dto?.userID === currentUserId ? 'Me' : '(no title)')}}
								</ng-container>
							</ion-label>
							<ion-buttons slot="end">
								<ion-button color="medium" title="Edit member" (click)="go('edit-member')">
									<ion-icon name="create"></ion-icon>
								</ion-button>
							</ion-buttons>
						</ion-item>
						<ion-item-divider mode="md" *ngIf="member?.brief?.gender && relatedAs">
							<ion-label *ngIf="member?.brief?.gender === 'male' && relatedAs === 'child'">My son</ion-label>
							<ion-label *ngIf="member?.brief?.gender === 'female' && relatedAs === 'child'">My daughter</ion-label>
							<ion-label *ngIf="member?.brief?.gender === 'male' && relatedAs === 'spouse'">My husband</ion-label>
							<ion-label *ngIf="member?.brief?.gender === 'female' && relatedAs === 'spouse'">My wife</ion-label>
						</ion-item-divider>
						<ion-item>
							<ion-label>Date of birth</ion-label>
							<ion-input readonly="readonly"></ion-input>
						</ion-item>
						<ion-item>
							<ion-label>Related to me as</ion-label>
							<ion-select placeholder="not specified yet" interface="popover" [value]="relatedAs">
								<ion-select-option value="undisclosed">Undisclosed</ion-select-option>
							</ion-select>
						</ion-item>
						<ng-container *ngIf="member?.dto && (!member?.dto?.gender || !relatedAs)">
							<ion-item
								*ngIf="team?.type === 'family' && relatedAs && member?.dto?.userID !== currentUserId">
								<ion-label>
									Relationship to me
								</ion-label>
								<ion-select [value]="relatedAs" interface="popover" (ionChange)="changeRelationship($event)">
									<ion-select-option value="spouse">spouse</ion-select-option>
									<ion-select-option value="child">child</ion-select-option>
									<ion-select-option value="parent">parent</ion-select-option>
									<ion-select-option value="other">other</ion-select-option>
								</ion-select>
							</ion-item>

							<ion-item-group
								*ngIf="team?.type === 'family' && !relatedAs && member?.dto?.userID !== currentUserId">
								<ion-item-divider>
									<ion-label>Relationship to me</ion-label>
								</ion-item-divider>
								<ion-radio-group [(ngModel)]="relatedAs" (ionChange)="changeRelationship($event)">
									<ion-item>
										<ion-label>Spouse</ion-label>
										<ion-radio slot="start" value="spouse"></ion-radio>
									</ion-item>
									<ion-item>
										<ion-label>Child</ion-label>
										<ion-radio slot="start" value="child"></ion-radio>
									</ion-item>
									<ion-item>
										<ion-label>Parent</ion-label>
										<ion-radio slot="start" value="child"></ion-radio>
									</ion-item>
									<ion-item>
										<ion-label>Other</ion-label>
										<ion-radio slot="start" value="other"></ion-radio>
									</ion-item>
								</ion-radio-group>
							</ion-item-group>

							<ion-item-group *ngIf="!member?.dto?.gender">
								<ion-item-divider>
									<ion-label>Gender</ion-label>
								</ion-item-divider>
								<ion-radio-group [value]="member?.dto?.gender" (ionChange)="changeGender($event)">
									<ion-item>
										<ion-label>Male</ion-label>
										<ion-radio slot="start" value="male" [disabled]="!member?.dto"></ion-radio>
									</ion-item>
									<ion-item>
										<ion-label>Female</ion-label>
										<ion-radio slot="start" value="female" [disabled]="!member?.dto"></ion-radio>
									</ion-item>
								</ion-radio-group>
							</ion-item-group>
						</ng-container>
					</ion-list>
				</ion-card>
			</ion-col>
			<ion-col>
				<ion-card>
					<ion-list>
						<sneat-member-apps-menu [team]="team"></sneat-member-apps-menu>
					</ion-list>
				</ion-card>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col>
				<ion-card>
					<ion-item mode="md" button class="with-buttons" (click)="go('member-schedule')">
						<ion-label>ðŸ“… Schedule</ion-label>
						<ion-buttons slot="end">
							<ion-button color="medium" title="Add activity">
								<ion-icon name="add"></ion-icon>
							</ion-button>
						</ion-buttons>
					</ion-item>
				</ion-card>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>
