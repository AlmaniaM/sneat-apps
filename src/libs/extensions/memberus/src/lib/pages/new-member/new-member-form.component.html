<form
	[formGroup]="addMemberForm"
	(ngSubmit)="submit()"
>
	<ion-card>
		<ion-item>
			<ion-label position="floating">Full name</ion-label>
			<ion-input [formControl]="fullName" #nameInput placeholder="Firstname Lastname"></ion-input>
			<!--			<ion-buttons slot="end">-->
			<!--				<ion-button fill="solid" color="primary">-->
			<!--					<ion-label>Next</ion-label>-->
			<!--					<ion-icon name="chevron-forward-outline" slot="end"></ion-icon>-->
			<!--				</ion-button>-->
			<!--			</ion-buttons>-->
		</ion-item>

		<ion-item-group *ngIf="!gender.value">
			<ion-item-divider color="light">
				<ion-label>Gender</ion-label>
			</ion-item-divider>
			<ion-radio-group [formControl]="gender">
				<ion-item>
					<ion-label>Male</ion-label>
					<ion-radio value="male" slot="start"></ion-radio>
				</ion-item>
				<ion-item>
					<ion-label>Female</ion-label>
					<ion-radio value="female" slot="start"></ion-radio>
				</ion-item>
				<ion-item>
					<ion-label>Other</ion-label>
					<ion-radio value="other" slot="start"></ion-radio>
				</ion-item>
				<ion-item>
					<ion-label>Undisclosed</ion-label>
					<ion-radio value="undisclosed" slot="start"></ion-radio>
				</ion-item>
			</ion-radio-group>
		</ion-item-group>
		<ion-item *ngIf="gender.value">
			<ion-label>Gender</ion-label>
			<ion-select [formControl]="gender" interface="popover">
				<ion-select-option value="male">Male</ion-select-option>
				<ion-select-option value="female">Female</ion-select-option>
				<ion-select-option value="other">other</ion-select-option>
				<ion-select-option value="undisclosed">undisclosed</ion-select-option>
			</ion-select>
		</ion-item>

		<ng-container *ngIf="gender.value">
			<ion-item-group *ngIf="!ageGroup.value">
				<ion-item-divider color="light">
					<ion-label>Age group</ion-label>
				</ion-item-divider>
				<ion-radio-group [formControl]="ageGroup">
					<ion-item>
						<ion-label>Adult</ion-label>
						<ion-radio slot="start" value="adult"></ion-radio>
					</ion-item>
					<ion-item>
						<ion-label>Child</ion-label>
						<ion-radio slot="start" value="child"></ion-radio>
					</ion-item>
				</ion-radio-group>
			</ion-item-group>
			<ion-item *ngIf="ageGroup.value">
				<ion-label>Age</ion-label>
				<ion-select [formControl]="ageGroup" interface="popover">
					<ion-select-option value="adult">Adult</ion-select-option>
					<ion-select-option value="child">Child</ion-select-option>
				</ion-select>
			</ion-item>
		</ng-container>
	</ion-card>

	<ion-card *ngIf="ageGroup.value && gender.value">
		<ion-item-group *ngIf="!relationship.value">
			<ion-item-divider color="light">
				<ion-label>Related to me as</ion-label>
			</ion-item-divider>
			<ion-radio-group [formControl]="relationship" (ionChange)="onRelationshipChanged()">
				<ion-item *ngFor="let rel of relationships">
					<ion-label>{{rel.title}}</ion-label>
					<ion-radio slot="start" [value]="rel.id"></ion-radio>
				</ion-item>
			</ion-radio-group>
		</ion-item-group>
		<ion-item *ngIf="relationship.value">
			<ion-label color="medium">Related to me as</ion-label>
			<ion-select [formControl]="relationship" interface="popover">
				<ion-select-option *ngFor="let rel of relationships" [value]="rel.id">{{rel.title}}</ion-select-option>
			</ion-select>
		</ion-item>
	</ion-card>

	<ion-card *ngIf="ageGroup.value && gender.value && relationship.value">
		<ion-item-divider color="light">
			<ion-label>Contacts</ion-label>
		</ion-item-divider>

		<ion-item>
			<ion-label>Email</ion-label>
			<ion-input type="email" [formControl]="email" ></ion-input>
		</ion-item>

		<ion-item>
			<ion-label>Phone</ion-label>
			<ion-input type="phone" [formControl]="phone"></ion-input>
		</ion-item>
	</ion-card>


	<ion-item-group *ngIf="ageGroup.value === 'child' && this.team?.dto && this.team?.dto?.type !== 'family'">
		<ion-item>
			<ion-label>Adult contact</ion-label>
			<ion-select value="mother" interface="action-sheet">
				<ion-select-option value="mother">Mother</ion-select-option>
				<ion-select-option value="father">Father</ion-select-option>
				<ion-select-option value="sibling">Sibling</ion-select-option>
			</ion-select>
		</ion-item>
		<ion-item>
			<ion-label>Adult's name</ion-label>
			<ion-input type="text"></ion-input>
		</ion-item>
		<ion-item>
			<ion-label>Adult's phone</ion-label>
			<ion-input type="phone"></ion-input>
		</ion-item>
		<ion-item>
			<ion-label>Adult's email</ion-label>
			<ion-input type="email"></ion-input>
		</ion-item>
	</ion-item-group>

	<ion-item-group *ngIf="roles">
		<ion-item-divider>
			<ion-label>Roles</ion-label>
		</ion-item-divider>
		<ion-item *ngFor="let role of roles">
			<ion-label>{{role.title}}</ion-label>
			<ion-checkbox [(ngModel)]="role.checked">{{role.title}}</ion-checkbox>
		</ion-item>
	</ion-item-group>


	<div class="ion-padding">
		<ion-button
			(click)="submit()"
			[disabled]="!team || addMemberForm.disabled || !addMemberForm.valid"
		>
			<ion-spinner
				name="lines-small"
				*ngIf="addMemberForm.disabled"
			></ion-spinner>
			<ion-label>Add member</ion-label>
		</ion-button>
	</div>
</form>
