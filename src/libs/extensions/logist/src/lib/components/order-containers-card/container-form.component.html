<ion-item-group>
	<ion-item-divider color="medium">
		<ion-label *ngIf="i || i === 0">Container #{{i + 1}} - <b>{{container?.type}}</b></ion-label>
		<ion-buttons slot="end">
			<ion-button (click)="delete($event)" *ngIf="!containerFormGroup.dirty">
				<ion-label>Delete</ion-label>
				<ion-icon name="close-outline" slot="end"></ion-icon>
			</ion-button>
			<ion-button *ngIf="containerFormGroup.dirty" (click)="save($event)">
				<ion-icon slot="start" name="save-outline"></ion-icon>
				<ion-label>Save</ion-label>
			</ion-button>
			<ion-button *ngIf="containerFormGroup.dirty" (click)="cancelEditing($event)">
				<ion-label>Cancel</ion-label>
			</ion-button>
		</ion-buttons>
	</ion-item-divider>
	<ion-grid class="ion-grid-layout">
		<ion-row>
			<ion-col size="12" size-xl="3" size-sm="6">
				<ion-item class="sneat-no-end-padding">
					<ion-label color="medium">Serial #</ion-label>
					<ion-input
						placeholder="optional"
						style="font-weight: bold"
						[formGroup]="containerFormGroup"
						[formControl]="number"
						(keyup.enter)="save($event)"
					></ion-input>
					<ion-buttons slot="end">
						<ion-button color="medium" *ngIf="number.value && !number.dirty">
							<ion-icon name="copy-outline"></ion-icon>
						</ion-button>
						<ion-button color="medium" *ngIf="number.dirty" (click)="save($event)">
							<ion-icon name="save-outline"></ion-icon>
						</ion-button>
					</ion-buttons>
				</ion-item>
			</ion-col>
			<ion-col size="12" size-xl="3" size-sm="6">
				<ion-item>
					<ion-label>Pallets</ion-label>
					<ion-input readonly disabled [value]="container?.numberOfPallets"></ion-input>
				</ion-item>
			</ion-col>
			<ion-col size="12" size-xl="3" size-sm="6">
				<ion-item>
					<ion-label>Gross (kg)</ion-label>
					<ion-input readonly disabled [value]="container?.grossWeightKg"></ion-input>
				</ion-item>
			</ion-col>
			<ion-col size="12" size-xl="3" size-sm="6">
				<ion-item>
					<ion-label>Volume (m<sup>3</sup>)</ion-label>
					<ion-input readonly disabled [value]="container?.volumeM3"></ion-input>
				</ion-item>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col size="12" size-md="9">
				<ion-segment [(ngModel)]="tab" color="medium">
					<ion-segment-button value="points">ðŸ›’ Points</ion-segment-button>
					<ion-segment-button value="segments">ðŸš› Segments</ion-segment-button>
				</ion-segment>
			</ion-col>
			<ion-col size="12" size-md="3">
				<ion-item>
					<ion-label></ion-label>
					<ion-buttons slot="end">
						<ion-button *ngIf="tab === 'points'" (click)="addPoints($event)">
							<ion-icon name="add-outline" slot="start"></ion-icon>
							<ion-label (click)="addPoints($event)" title="Add shipping points">Add</ion-label>
						</ion-button>
						<ion-button *ngIf="tab === 'segments'" (click)="addSegment($event)">
							<ion-icon name="add-outline" slot="start"></ion-icon>
							<ion-label title="Add shipping segments">Add</ion-label>
						</ion-button>
					</ion-buttons>
				</ion-item>
			</ion-col>
		</ion-row>
	</ion-grid>
	<ng-container *ngIf="tab === 'points'">
		<ion-item-divider *ngIf="containerPoints && !containerPoints?.length">
			<ion-label color="medium">
				No shipping points have been added for the container yet.
			</ion-label>
		</ion-item-divider>
		<sneat-order-container-point *ngFor="let containerPoint of containerPoints"
													 [team]="this.team"
													 [order]="order"
													 [containerPoint]="containerPoint"
		></sneat-order-container-point>
	</ng-container>
	<ng-container *ngIf="tab === 'segments'">
		<ion-item-divider *ngIf="containerSegments && !containerSegments?.length">
			<ion-label color="medium">
				No shipping segments have been added for the container yet.
			</ion-label>
		</ion-item-divider>

		<sneat-container-segment *ngFor="let segment of containerSegments; trackBy:segmentID"
														 [order]="order"
														 [segment]="segment"
		></sneat-container-segment>
	</ng-container>
</ion-item-group>
