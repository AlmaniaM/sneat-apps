<ion-header>
	<ion-toolbar color="light">
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/space/{{team?.type}}/{{team?.id}}"></ion-back-button>
		</ion-buttons>
		<ion-title>Orders</ion-title>
		<ion-buttons slot="end">
			<ion-button color="primary" routerLink="../new-order">
				<ion-icon name="add-outline" slot="start"></ion-icon>
				<ion-label>New</ion-label>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content>

	<div class="ion-padding-horizontal">
		<ion-segment [(ngModel)]="type">
			<ion-segment-button value="">All</ion-segment-button>
			<ion-segment-button value="export">Export</ion-segment-button>
			<ion-segment-button value="import">Import</ion-segment-button>
			<ion-segment-button value="internal">Internal</ion-segment-button>
		</ion-segment>
	</div>

	<ion-card>
		<ion-item color="light">
			<ion-label style="font-weight: bold">Filter
				<ion-text *ngIf="refNumber" color="medium"> | Ref #</ion-text>
			</ion-label>
			<ion-input placeholder="ref #" [(ngModel)]="refNumber" (ionChange)="refNumberChanged($event)"></ion-input>
			<ion-buttons slot="end" *ngIf="refNumber || isRefNumberChanged">
				<ion-button *ngIf="isRefNumberChanged"
										fill="solid"
										color="primary"
										(click)="findByRefNumber($event)">
					Find {{refNumber}}:{{isRefNumberChanged}}
				</ion-button>
				<ion-button *ngIf="!isRefNumberChanged" color="danger"
										title="Clear filter"
										(click)="clearRefNumber($event)">
					<ion-icon name="close-outline"></ion-icon>
				</ion-button>
			</ion-buttons>
		</ion-item>
		<ion-grid class="ion-grid-layout">
			<ion-row>
				<ion-col>
					<sneat-contact-input
						label="Buyer"
						[team]="team"
						[contact]="contactByRole['buyer']"
						(contactChange)="onFilterContactChanged('buyer', $event)"
					></sneat-contact-input>
				</ion-col>
				<ion-col>
					<sneat-contact-input
						label="Carrier"
						[team]="team"
						[contact]="contactByRole['carrier']"
						(contactChange)="onFilterContactChanged('carrier', $event)"
					></sneat-contact-input>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<sneat-contact-input
						label="Consignee"
						[team]="team"
						[contact]="contactByRole['consignee']"
						(contactChange)="onFilterContactChanged('consignee', $event)"
					></sneat-contact-input>
				</ion-col>
				<ion-col>
					<sneat-contact-input
						label="Shipper"
						[team]="team"
						[contact]="contactByRole['shipper']"
						(contactChange)="onFilterContactChanged('shipper', $event)"
					></sneat-contact-input>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<!--					<sneat-country-selector></sneat-country-selector>-->
					<ion-item>
						<ion-label color="medium" position="stacked">Country of destination</ion-label>
						<ion-select [(ngModel)]="countryOrigin" interface="popover">
							<ion-select-option value="">All</ion-select-option>
							<ion-select-option value="es">Spain</ion-select-option>
							<ion-select-option value="ru">Russia</ion-select-option>
							<ion-select-option value="ua">Ukraine</ion-select-option>
						</ion-select>
					</ion-item>
				</ion-col>
				<ion-col>
					<ion-item>
						<ion-label color="medium" position="stacked">Country of origin</ion-label>
						<ion-select [(ngModel)]="countryOrigin" interface="popover">
							<ion-select-option value="">All</ion-select-option>
							<ion-select-option value="es">Spain</ion-select-option>
							<ion-select-option value="ru">Russia</ion-select-option>
							<ion-select-option value="ua">Ukraine</ion-select-option>
						</ion-select>
					</ion-item>
				</ion-col>
			</ion-row>
		</ion-grid>

		<!--		<ion-item-divider color="light">-->
		<!--			<ion-label color="medium">Status</ion-label>-->
		<!--		</ion-item-divider>-->
		<!--		<ion-item-divider color="light">-->
		<!--			<ion-label>Counterparty</ion-label>-->
		<!--		</ion-item-divider>-->
	</ion-card>

	<ion-segment [(ngModel)]="status" color="dark">
		<ion-segment-button value="draft">Drafts</ion-segment-button>
		<ion-segment-button value="active">Active</ion-segment-button>
		<ion-segment-button value="complete">Complete</ion-segment-button>
		<ion-segment-button value="canceled">Canceled</ion-segment-button>
	</ion-segment>

	<sneat-express-orders-list [team]="team" [orders]="orders" style="margin-bottom: 50px;"></sneat-express-orders-list>

</ion-content>
