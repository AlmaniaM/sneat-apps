<ion-header>
	<sneat-dialog-header dialogTitle="New segment"></sneat-dialog-header>
</ion-header>
<ion-content>
	<ion-card *ngIf="container">
		<ion-item>
			<ion-label>Container: {{container.type}}</ion-label>
		</ion-item>
	</ion-card>

	<ion-card>
		<!--		<ion-item-divider color="light">-->
		<!--			<ion-label>Required fields</ion-label>-->
		<!--		</ion-item-divider>-->
		<!--		<sneat-express-order-counterparty-input-->
		<!--			label="ðŸš› By"-->
		<!--			[team]="order?.team"-->
		<!--			counterpartyRole="trucker"-->
		<!--			contactType="company"-->
		<!--			contactRole="trucker"-->
		<!--			[readonly]="readonly"-->
		<!--		>-->
		<!--		</sneat-express-order-counterparty-input>-->
		<sneat-contact-input
			label="ðŸš› By"
			[team]="order?.team"
			[(contact)]="byContact"
			contactType="company"
			contactRole="trucker"
			[readonly]="readonly"
			(contactChange)="onContactChanged('by', $event)"
		></sneat-contact-input>

		<!--		<ion-grid class="ion-grid-layout">-->
		<!--			<ion-row>-->
		<!--				<ion-col>-->
		<!--				</ion-col>-->
		<!--				<ion-col>-->
		<!--					<ion-item>-->
		<!--						<ion-label>On</ion-label>-->
		<!--						<ion-input type="date"></ion-input>-->
		<!--					</ion-item>-->
		<!--				</ion-col>-->
		<!--			</ion-row>-->
		<!--		</ion-grid>-->


	</ion-card>

	<ion-card>
		<ion-item-divider color="light">
			<ion-label slot="start">From</ion-label>
			<ion-segment [(ngModel)]="from" (ionChange)="onFromChanged($event)">
				<ion-segment-button value="port">Port</ion-segment-button>
				<ion-segment-button value="dispatcher">Dispatcher</ion-segment-button>
			</ion-segment>
		</ion-item-divider>
		<sneat-contact-input
			[label]="from|titlecase"
			[team]="order?.team"
			[contactType]="from === 'port' ? 'company' : 'location'"
			[contactRole]="from === 'port' ? 'port' : 'location'"
			[contact]="fromContact"
			[parentRole]="from === 'port' ? undefined : 'dispatcher'"
			[readonly]="readonly"
			(contactChange)="onContactChanged('from', $event)"
		></sneat-contact-input>
		<ion-item>
			<ion-label color="medium">On</ion-label>
			<ion-input type="date" [(ngModel)]="fromDate"></ion-input>
		</ion-item>
	</ion-card>

	<div style="text-align: center">
		<ion-button fill="clear" color="medium" (click)="switchFromWithTo()">
			<ion-icon name="arrow-down-outline" slot="start"></ion-icon>
			<ion-label style="text-transform: none">Switch 'from' & 'to'</ion-label>
			<ion-icon name="arrow-up-outline" slot="end"></ion-icon>
		</ion-button>
	</div>

	<ion-card>
		<ion-item-divider color="light">
			<ion-label slot="start">To</ion-label>
			<ion-segment [(ngModel)]="to" (ionChange)="onToChanged()">
				<ion-segment-button value="port">Port</ion-segment-button>
				<ion-segment-button value="dispatcher">Dispatcher</ion-segment-button>
			</ion-segment>
		</ion-item-divider>
		<sneat-contact-input
			[label]="to|titlecase"
			[team]="order?.team"
			[contactRole]="to"
			[parentRole]="to === 'dispatcher' ? 'dispatcher' : undefined"
			[(contact)]="toContact"
			[readonly]="readonly"
			(contactChange)="onContactChanged('to', $event)"
		></sneat-contact-input>
		<ion-item>
			<ion-label color="medium">On</ion-label>
			<ion-input type="date" [(ngModel)]="toDate"></ion-input>
		</ion-item>
	</ion-card>

	<ion-card *ngIf="!container">
		<ion-item-divider color="light">
			<ion-label>Containers</ion-label>
			<ion-buttons slot="end">
				<ion-button color="medium" (click)="addAllContainer()" *ngIf="hasUncheckedContainers()">
					<ion-icon name="bag-add-outline" slot="start"></ion-icon>
					<ion-label>Add all</ion-label>
				</ion-button>
			</ion-buttons>
		</ion-item-divider>
		<ion-item *ngFor="let c of containers">
			<ion-checkbox slot="start" [(ngModel)]="c.checked"></ion-checkbox>
			<ion-label>{{c.type|uppercase}} &mdash; <span *ngIf="c.number">#{{c.number}}</span></ion-label>
		</ion-item>
	</ion-card>

</ion-content>

<ion-footer class="ion-padding">
	<ion-button (click)="submitAddSegment($event)">Add segment</ion-button>
	<ion-button color="medium" fill="clear" class="ion-margin-start" (click)="close()">Cancel</ion-button>
</ion-footer>
