<ion-item-divider color="primary">
	<ion-label style="font-weight: bold">New slot</ion-label>
	<ion-buttons slot="end">
		<ion-button title="Cancel" role="cancel" (click)="dismissModal()">
<!--			<ion-label>Cancel</ion-label>-->
			<ion-icon name="close" slot="end"></ion-icon>
		</ion-button>
	</ion-buttons>
</ion-item-divider>
<ion-item *ngIf="happeningType === 'single'">
	<ion-label *ngIf="isToDo && !date">Due</ion-label>
	<ion-label *ngIf="isToDo && date">Due on</ion-label>
	<ion-label *ngIf="!isToDo">Takes place on</ion-label>
	<ion-datetime [min]="minDate" [max]="maxDate" [(ngModel)]="date"
								(ionChange)="onEventTimesChanged()"></ion-datetime>
</ion-item>

<form [formGroup]="timeForm" *ngIf="happeningType === 'recurring' || date">
<!--	<ion-item-divider color="light">Where</ion-item-divider>-->
<!--	<ion-item>-->
<!--		<ion-label position="floating">Address</ion-label>-->
<!--		<ion-textarea></ion-textarea>-->
<!--	</ion-item>-->

	<ion-item-divider color="light">When</ion-item-divider>
	<sneat-start-end-datetime-form
		[hideStartDate]="happeningType === 'recurring'"
		(slotChanged)="onTimingChanged($event)"
	></sneat-start-end-datetime-form>

	<ion-item *ngIf="happeningType === 'recurring'" color="light">
		<ion-label>Repeats</ion-label>
		<ion-select formControlName="repeats" interface="popover" (ionChange)="repeatsChanged()">
			<ion-select-option value="weekly">Weekly</ion-select-option>
			<!--			<ion-select-option value="fortnightly">Fortnightly</ion-select-option>-->
			<ion-select-option value="week-1st">Every 1st week of a month</ion-select-option>
			<ion-select-option value="week-2nd">Every 2nd week of a month</ion-select-option>
			<ion-select-option value="week-3d">Every 3d week of a month</ion-select-option>
			<ion-select-option value="week-last">Every last week of a month</ion-select-option>
		</ion-select>
	</ion-item>
</form>

<ng-container *ngIf="happeningType === 'recurring'">
	<form [formGroup]="weekdaysForm" *ngIf="happens === 'weekly' && showWeekday">
		<ion-grid class="grid-layout">
			<ion-row>
				<ion-col size="6">
					<ion-item>
						<ion-label>Monday</ion-label>
						<ion-checkbox slot="start" value="mo" [formControl]="weekdayMo"></ion-checkbox>
					</ion-item>
					<ion-item>
						<ion-label>Tuesday</ion-label>
						<ion-checkbox slot="start" value="tu" [formControl]="weekdayTu"></ion-checkbox>
					</ion-item>
					<ion-item>
						<ion-label>Wednesday</ion-label>
						<ion-checkbox slot="start" value="we" [formControl]="weekdayWe"></ion-checkbox>
					</ion-item>
					<ion-item>
						<ion-label>Thursday</ion-label>
						<ion-checkbox slot="start" value="th" [formControl]="weekdayTh"></ion-checkbox>
					</ion-item>
				</ion-col>
				<ion-col size="6">
					<ion-item>
						<ion-label>Friday</ion-label>
						<ion-checkbox slot="start" value="fr" [formControl]="weekdayFr"></ion-checkbox>
					</ion-item>
					<ion-item>
						<ion-label>Saturday</ion-label>
						<ion-checkbox slot="start" value="sa" [formControl]="weekdaySa"></ion-checkbox>
					</ion-item>
					<ion-item>
						<ion-label>Sunday</ion-label>
						<ion-checkbox slot="start" value="su" [formControl]="weekdaySu"></ion-checkbox>
					</ion-item>
					<ion-button style="margin: 1em 1em 0 3em;" color="primary" (click)="addSlot()" expand="full">
						<ion-label>Add slot</ion-label>
					</ion-button>
				</ion-col>
			</ion-row>
		</ion-grid>
	</form>
</ng-container>
