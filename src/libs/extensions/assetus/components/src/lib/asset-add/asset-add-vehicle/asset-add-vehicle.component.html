<h1 class="ion-padding">New vehicle</h1>

<ion-card>
	<sneat-select-from-list [(ngModel)]="vehicleType" (ngModelChange)="onVehicleTypeChanged()" [isFilterable]="false" title="Type" [items]="vehicleTypes"></sneat-select-from-list>
	<sneat-select-from-list *ngIf="vehicleType" [(ngModel)]="make" [isFilterable]="true" title="Make" [items]="makes"></sneat-select-from-list>
	<sneat-select-from-list *ngIf="make" [(ngModel)]="model" [isFilterable]="true" title="Model" [items]="models"></sneat-select-from-list>
</ion-card>

<ion-card *ngIf="model">
	<ion-list>
		<sneat-country-selector [country]="country" label="Country of registration"></sneat-country-selector>
		<ion-item>
			<ion-label style="font-weight: bold">Registration #</ion-label>
			<ion-input [(ngModel)]="regNumber" style="text-transform: uppercase;" placeholder="###-CO-#####"></ion-input>
			<!--            <ion-button fill="outline">Validate</ion-button>-->
		</ion-item>
		<!--        <ion-item>-->
		<!--            <ion-label title="Vehicle Identification Number">-->
		<!--                VIN-->
		<!--                &lt;!&ndash;<sup style="color: #aaa;">optional</sup>&ndash;&gt;-->
		<!--            </ion-label>-->
		<!--            <ion-input [(ngModel)]="vin" style="text-transform: uppercase;"></ion-input>-->
		<!--        </ion-item>-->
		<ion-item>
			<ion-label>VIN</ion-label>
			<ion-input type="text" [(ngModel)]="vin"></ion-input>
		</ion-item>
		<ion-item>
			<ion-label>Year produced</ion-label>
			<ion-input type="text" [(ngModel)]="yearOfBuild"></ion-input>
		</ion-item>
		<!--	<ion-item>-->
		<!--		<ion-label>Engine</ion-label>-->
		<!--		<ion-select [(ngModel)]="engine" [disabled]="!model" interface="popover">-->
		<!--			<ion-select-option *ngFor="let v of engines; trackBy: id">{{v}}</ion-select-option>-->
		<!--			<ion-select-option value="-">Other</ion-select-option>-->
		<!--		</ion-select>-->
		<!--	</ion-item>-->
	</ion-list>
</ion-card>

<ion-card *ngIf="model">
	<ion-item>
		<ion-label position="stacked">Taxed till</ion-label>
		<!-- Datetime in popover with input -->
		<ion-input [value]="taxExpires"></ion-input>
		<ion-buttons slot="end">
			<ion-button fill="clear" id="open-date-input-2">
				<ion-icon icon="calendar"></ion-icon>
			</ion-button>
		</ion-buttons>
		<ion-popover trigger="open-date-input-2" show-backdrop="false">
			<ng-template>
				<ion-datetime
					#popoverDatetime2
					presentation="date"
					(ionChange)="taxExpires = formatDate(popoverDatetime2.value)"
				></ion-datetime>
			</ng-template>
		</ion-popover>
	</ion-item>
	<!--		<ion-item>-->
	<!--			<ion-label>NCT till</ion-label>-->
	<!--			<ion-datetime max="2021" [(ngModel)]="nctExpires"></ion-datetime>-->
	<!--		</ion-item>-->
	<!--		<ion-item>-->
	<!--			<ion-label>Service due</ion-label>-->
	<!--			<ion-datetime max="2021" [(ngModel)]="nextServiceDue"></ion-datetime>-->
	<!--		</ion-item>-->

</ion-card>

<ion-button [color]="model ? 'primary' : 'light'" size="large" class="ion-margin" expand="full" [disabled]="isSubmitting" (click)="submitVehicleForm()">
	<ng-container *ngIf="!isSubmitting">Add vehicle</ng-container>
	<ng-container *ngIf="isSubmitting">Adding vehicle...</ng-container>
</ion-button>
